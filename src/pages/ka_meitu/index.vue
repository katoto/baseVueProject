<template>
  <div>
    <div class="containbox">
      <div class="container navHead">
        <h1>超级美图</h1>
        <span class="visible-pc">每日热点美图</span>
      </div>
    </div>
    <div class="container">
      <div class="list_cont list_cont2 w1180">
        <div class="tab_zt">
          <div class="tab_box">
            <ul class="clearfix">
              <li>
                <a href="javascript:;">
                  <img
                    src="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    data-original="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    alt="丰满美女前凸后翘诱惑性感写真"
                    style="display: inline;"
                  >
                  <p>丰满美女前凸后翘诱惑性感写真</p>
                </a>
              </li>
              <li>
                <a href="http://www.win4000.com/meinv170333.html">
                  <img
                    src="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    data-original="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    alt="丰满美女前凸后翘诱惑性感写真"
                    style="display: inline;"
                  >
                  <p>丰满美女前凸后翘诱惑性感写真</p>
                </a>
              </li>
              <li>
                <a href="http://www.win4000.com/meinv170333.html">
                  <img
                    src="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    data-original="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    alt="丰满美女前凸后翘诱惑性感写真"
                    style="display: inline;"
                  >
                  <p>丰满美女前凸后翘诱惑性感写真</p>
                </a>
              </li>
              <li>
                <a href="http://www.win4000.com/meinv170333.html">
                  <img
                    src="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    data-original="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    alt="丰满美女前凸后翘诱惑性感写真"
                    style="display: inline;"
                  >
                  <p>丰满美女前凸后翘诱惑性感写真</p>
                </a>
              </li>
              <li>
                <a href="http://www.win4000.com/meinv170333.html">
                  <img
                    src="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    data-original="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    alt="丰满美女前凸后翘诱惑性感写真"
                    style="display: inline;"
                  >
                  <p>丰满美女前凸后翘诱惑性感写真</p>
                </a>
              </li>
              <li>
                <a href="http://www.win4000.com/meinv170333.html">
                  <img
                    src="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    data-original="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    alt="丰满美女前凸后翘诱惑性感写真"
                    style="display: inline;"
                  >
                  <p>丰满美女前凸后翘诱惑性感写真</p>
                </a>
              </li>
              <li>
                <a href="http://www.win4000.com/meinv170333.html">
                  <img
                    src="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    data-original="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    alt="丰满美女前凸后翘诱惑性感写真"
                    style="display: inline;"
                  >
                  <p>丰满美女前凸后翘诱惑性感写真</p>
                </a>
              </li>
              <li>
                <a href="http://www.win4000.com/meinv170333.html">
                  <img
                    src="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    data-original="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    alt="丰满美女前凸后翘诱惑性感写真"
                    style="display: inline;"
                  >
                  <p>丰满美女前凸后翘诱惑性感写真</p>
                </a>
              </li>
              <li>
                <a href="http://www.win4000.com/meinv170333.html">
                  <img
                    src="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    data-original="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    alt="丰满美女前凸后翘诱惑性感写真"
                    style="display: inline;"
                  >
                  <p>丰满美女前凸后翘诱惑性感写真</p>
                </a>
              </li>
              <li>
                <a href="http://www.win4000.com/meinv170333.html">
                  <img
                    src="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    data-original="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    alt="丰满美女前凸后翘诱惑性感写真"
                    style="display: inline;"
                  >
                  <p>丰满美女前凸后翘诱惑性感写真</p>
                </a>
              </li>
              <li>
                <a href="http://www.win4000.com/meinv170333.html">
                  <img
                    src="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    data-original="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    alt="丰满美女前凸后翘诱惑性感写真"
                    style="display: inline;"
                  >
                  <p>丰满美女前凸后翘诱惑性感写真</p>
                </a>
              </li>
              <li>
                <a href="http://www.win4000.com/meinv170333.html">
                  <img
                    src="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    data-original="http://pic1.win4000.com/pic/8/90/8002015eb0_250_350.jpg"
                    alt="丰满美女前凸后翘诱惑性感写真"
                    style="display: inline;"
                  >
                  <p>丰满美女前凸后翘诱惑性感写真</p>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
<script>
export default {
  data() {
    return {
      currPage: 1,
      isLoading: false,
      pagesize: 12,
      tuzhai: []
    }
  },
  methods: {
    jump2msg(item) {
      delete item.baseDesc
      delete item._id
      localStorage.setItem('tuzhai', JSON.stringify(item))
      this.$router.push(item.titleLink)
    },
    async initPage() {
      let list = await this.$store.dispatch('getiqiyiInfo')
      if (list && list.status === '100') {
      }
    },
    async pageMsg(pageno = 1) {
      let params = {
        pageno,
        pagesize: this.pagesize
      }
      let data = await this.$store.dispatch('ka_tuzhai/getTuzhailist', params)
      if (data && data.data && data.data.msg) {
        if (data.data.msg.length > 0) {
          data.data.msg.forEach((item, index) => {
            if (item) {
              if (item.img) item.img = '//qingniantuzhai.com' + item.img
              if (item.titleLink) {
                item.titleLink = '/tuzhaimsg/' + item.titleLink.replace(/\//g, '$')
              }
            }
          })
          this.tuzhai = this.tuzhai.concat(data.data.msg)
          this.isLoading = false
        }
      }
    },
    getScrollTop() {
      let scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0
      return scrollTop
    },
    scrollGet() {
      let bottomHei = (document.documentElement.offsetHeight - this.getScrollTop() - window.innerHeight) <= 350
      if (!this.isLoading && bottomHei) {
        this.isLoading = true
        this.currPage = this.currPage + 1
        console.log(this.currPage)
        this.pageMsg(this.currPage)
      }
    }
  },
  mounted() {
    this.pageMsg()
    document.addEventListener('scroll', this.scrollGet, true)
  },
  destroyed() {
    window.removeEventListener('scroll', this.scrollGet, true)
  }
}
</script>
<style scoped lang="less" type="text/less">
@import "../../styles/lib-media.less";
.containbox {
  .navHead {
    padding: 20px 0;
    h1 {
      font-size: 26px;
      line-height: 32px;
      text-align: left;
      font-weight: 600;
    }
  }
}
// 美图
.list_cont2 {
  .tab_box {
    li {
      height: 400px;
      a {
        height: 330px;
      }
    }
  }
}
.list_cont {
  position: relative;
  .tab_box {
    ul {
      margin: 0 0 0 -20px;
      li {
        float: left;
        margin: 0 0 20px 20px;
        width: 220px;
        p {
          position: absolute;
          left: 0;
          bottom: -70px;
          line-height: 70px;
          height: 70px;
          overflow: hidden;
          padding: 0 10px;
          background-color: #fff;
          color: #666666;
          font-size: 14px;
          width: 100%;
          text-align: center;
        }
        a {
          display: block;
          position: relative;
          img {
            width: 100%;
            height: 100%;
            object-fit: cover;
          }
        }
        &:hover {
          -moz-box-shadow: 5px 5px 10px #ccc;
          -webkit-box-shadow: 5px 5px 10px #ccc;
          box-shadow: 5px 5px 10px #ccc;
        }
      }
    }
  }
}
.w1180 {
  width: 1180px;
  margin: 0 auto 20px;
}

/* xs超小屏幕（手机，最大 480） */
@media (max-width: @screen-phone) {
  .containbox {
    border-bottom: 0;
    .navHead {
      padding: 10px 0;
      h1 {
        font-size: 20px;
        line-height: 24px;
        text-align: left;
        font-weight: 600;
      }
    }
  }
}
</style>

